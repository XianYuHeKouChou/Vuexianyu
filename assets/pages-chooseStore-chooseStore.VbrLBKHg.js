import{_ as e,r as t,a as s,o as i,A as o,w as l,b as a,G as r,B as n,C as u,D as c,c as d,F as h,W as p,M as f,i as m,e as y,t as g,h as S,d as x,T as b,X as k,Q as C}from"./index-Dk3PNdqW.js";import{_ as w}from"./uni-icons.DIvzvsbo.js";import{_}from"./uni-card.Doqgz0hI.js";function v(e){let t="";for(let s in e){t+=`${s}:${e[s]};`}return t}const $=e({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let s in e)e[s]&&(t+=`${s} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return v({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return v({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("blur",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(e,y,g,S,x,b){const k=t(s("uni-icons"),w),C=p,_=f,v=m;return i(),o(v,{class:r(["uni-easyinput",{"uni-easyinput-error":b.msg}]),style:n(b.boxStyle)},{default:l((()=>[a(v,{class:r(["uni-easyinput__content",b.inputContentClass]),style:n(b.inputContentStyle)},{default:l((()=>[g.prefixIcon?(i(),o(k,{key:0,class:"content-clear-icon",type:g.prefixIcon,color:"#c0c4cc",onClick:y[0]||(y[0]=e=>b.onClickIcon("prefix")),size:"22"},null,8,["type"])):u("",!0),c(e.$slots,"left",{},void 0,!0),"textarea"===g.type?(i(),o(C,{key:1,class:r(["uni-easyinput__content-textarea",{"input-padding":g.inputBorder}]),name:g.name,value:x.val,placeholder:g.placeholder,placeholderStyle:g.placeholderStyle,disabled:g.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:b.inputMaxlength,focus:x.focused,autoHeight:g.autoHeight,"cursor-spacing":g.cursorSpacing,"adjust-position":g.adjustPosition,onInput:b.onInput,onBlur:b._Blur,onFocus:b._Focus,onConfirm:b.onConfirm,onKeyboardheightchange:b.onkeyboardheightchange},null,8,["class","name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","adjust-position","onInput","onBlur","onFocus","onConfirm","onKeyboardheightchange"])):(i(),o(_,{key:2,type:"password"===g.type?"text":g.type,class:"uni-easyinput__content-input",style:n(b.inputStyle),name:g.name,value:x.val,password:!x.showPassword&&"password"===g.type,placeholder:g.placeholder,placeholderStyle:g.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:g.disabled,maxlength:b.inputMaxlength,focus:x.focused,confirmType:g.confirmType,"cursor-spacing":g.cursorSpacing,"adjust-position":g.adjustPosition,onFocus:b._Focus,onBlur:b._Blur,onInput:b.onInput,onConfirm:b.onConfirm,onKeyboardheightchange:b.onkeyboardheightchange},null,8,["type","style","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","adjust-position","onFocus","onBlur","onInput","onConfirm","onKeyboardheightchange"])),"password"===g.type&&g.passwordIcon?(i(),d(h,{key:3},[b.isVal?(i(),o(k,{key:0,class:r(["content-clear-icon",{"is-textarea-icon":"textarea"===g.type}]),type:x.showPassword?"eye-slash-filled":"eye-filled",size:22,color:x.focusShow?g.primaryColor:"#c0c4cc",onClick:b.onEyes},null,8,["class","type","color","onClick"])):u("",!0)],64)):u("",!0),g.suffixIcon?(i(),d(h,{key:4},[g.suffixIcon?(i(),o(k,{key:0,class:"content-clear-icon",type:g.suffixIcon,color:"#c0c4cc",onClick:y[1]||(y[1]=e=>b.onClickIcon("suffix")),size:"22"},null,8,["type"])):u("",!0)],64)):(i(),d(h,{key:5},[g.clearable&&b.isVal&&!g.disabled&&"textarea"!==g.type?(i(),o(k,{key:0,class:r(["content-clear-icon",{"is-textarea-icon":"textarea"===g.type}]),type:"clear",size:g.clearSize,color:b.msg?"#dd524d":x.focusShow?g.primaryColor:"#c0c4cc",onClick:b.onClear},null,8,["class","size","color","onClick"])):u("",!0)],64)),c(e.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}],["__scopeId","data-v-5763a810"]]);const I=e({name:"UniTag",emits:["click"],props:{type:{type:String,default:"default"},size:{type:String,default:"normal"},text:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},inverted:{type:[Boolean,String],default:!1},circle:{type:[Boolean,String],default:!1},mark:{type:[Boolean,String],default:!1},customStyle:{type:String,default:""}},computed:{classes(){const{type:e,disabled:t,inverted:s,circle:i,mark:o,size:l,isTrue:a}=this;return["uni-tag--"+e,"uni-tag--"+l,a(t)?"uni-tag--disabled":"",a(s)?"uni-tag--"+e+"--inverted":"",a(i)?"uni-tag--circle":"",a(o)?"uni-tag--mark":"",a(s)?"uni-tag--inverted uni-tag-text--"+e:"","small"===l?"uni-tag-text--small":""].join(" ")}},methods:{isTrue:e=>!0===e||"true"===e,onClick(){this.isTrue(this.disabled)||this.$emit("click")}}},[["render",function(e,t,s,a,c,d){const h=S;return s.text?(i(),o(h,{key:0,class:r(["uni-tag",d.classes]),style:n(s.customStyle),onClick:d.onClick},{default:l((()=>[y(g(s.text),1)])),_:1},8,["class","style","onClick"])):u("",!0)}],["__scopeId","data-v-9f3c5d16"]]);const B=e({data:()=>({latitude:22.830623582986004,longitude:108.20143940534501,StoreName:"",StoreList:null}),onReady(){this.$req.ceshi=this.$refs.loadToast,this.getStoreList()},methods:{getStoreList(){this.$req.httpGet("/api/test-stores",{},(e=>{this.StoreList=e.data}))},searchStore(){if(!this.StoreName)return this.getStoreList();this.$req.httpGet("/api/test-stores",{"filters[sccStoreName][$eq]":this.StoreName},(e=>{this.StoreList=e.data}))},goOrder(e){this.$req.showToast(`门店电话：${this.StoreList[e].phone},自己打电话去下单`),this.longitude=this.StoreList[e].longitude,this.latitude=this.StoreList[e].latitude,this.$global.chooseStore=this.StoreList[e].sccStoreName}}},[["render",function(e,r,n,u,c,p){const f=k,w=m,v=t(s("uni-easyinput"),$),B=S,T=t(s("uni-tag"),I),V=C,F=t(s("uni-card"),_),N=t(s("loading"),x);return i(),d(h,null,[a(w,null,{default:l((()=>[a(f,{latitude:c.latitude,longitude:c.longitude,class:"w-full h-200"},null,8,["latitude","longitude"])])),_:1}),a(w,{class:"p-10 bg-white"},{default:l((()=>[a(v,{suffixIcon:"search",modelValue:c.StoreName,"onUpdate:modelValue":r[0]||(r[0]=e=>c.StoreName=e),placeholder:"请输入门店名称",onIconClick:p.searchStore},null,8,["modelValue","onIconClick"])])),_:1}),a(w,{class:"pb-30"},{default:l((()=>[(i(!0),d(h,null,b(c.StoreList,((e,t)=>(i(),o(F,{"is-shadow":!0,key:t},{default:l((()=>[a(w,{class:"flex-center justif-between"},{default:l((()=>[a(w,{class:"flex flex-col"},{default:l((()=>[a(w,{class:"flex",style:{"align-items":"center"}},{default:l((()=>[a(B,{class:"text-xl text-black text-bold mr-20 text2"},{default:l((()=>[y(g(e.sccStoreName),1)])),_:2},1024),a(T,{circle:!0,text:e.areaName,type:"error",size:"small",class:"w-60"},null,8,["text"])])),_:2},1024),a(B,{class:"text-base text-gray mt-15"},{default:l((()=>[y("营业时间："+g(e.businessBeginPeriod)+"-"+g(e.businessEndPeriod),1)])),_:2},1024)])),_:2},1024),a(w,{class:""},{default:l((()=>[a(V,{type:"warn",class:"rounded-xl h-30 flex-center",onClick:e=>p.goOrder(t)},{default:l((()=>[y("去下单")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),a(w,{class:""},{default:l((()=>[a(B,{class:"text2 text-gray text-xs"},{default:l((()=>[y(g(e.address),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),a(N,{ref:"loadToast"},null,512)],64)}]]);export{B as default};
